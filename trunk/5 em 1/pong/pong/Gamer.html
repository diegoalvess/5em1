<!DOCTYPE>

<html>

	<head>
	
		<title>
		
			Gamer
			
		</title>
		
	</head>
	
	<body>
		<!--Centralizando o canvas na tela do jogo --!>
		<center>
					Gamer
		</br>
		<canvas width="1200" height="800" id="main" style="border:1px solid #000000;" ></canvas>
		</center>
			
			
		<script>
		
		
		<!--VARIAVEL DE PONTOS
		var pontos_direita = 0;
		var pontos_esquerda = 0;
		
		<!--VARIAVEL DA TELA
		var tela_imagem = new Image();
		var tela_carregada = false;
		var tela_tamanho_x = 1200;
		var tela_tamanho_y = 800;
		
		
		<!--PALETA ESQUERDA
		var paleta_esquerda_imagem = new Image();
		var paleta_esquerda_carregada = false;
		var paleta_esquerda_posicao_X = 1;
		var paleta_esquerda_posicao_Y = 240;
		var paleta_esquerda_tamanho_W = 40;
		var paleta_esquerda_tamanho_H = 120;
		var paleta_esquerda_velocidade_X = 5;
		var paleta_esquerda_velocidade_Y = 15;
		
		<!--PALETA DIREITA
		var paleta_direita_imagem = new Image();
		var paleta_direita_carregada = false;
		var paleta_direita_posicao_X = 759;
		var paleta_direita_posicao_Y = 240;
		var paleta_direita_tamanho_W = 40;
		var paleta_direita_tamanho_H = 120;
		var paleta_direita_velocidade_X = 5;
		var paleta_direita_velocidade_Y = 15;
		
		<!--BOLA
		var bola_imagem = new Image();
		var bola_carregada = false;
		var bola_posicao_X = tela_tamanho_W/2;
		var bola_posicao_Y = tela_tamanho_H/2;
		var bola_tamanho_W = 40;
		var bola_tamanho_H = 40;
		var bola_velocidade_X = Math.floor((Math.random()*10)+1);
		var bola_velocidade_Y = Math.floor((Math.random()*10)+1);
		var bola_velocidade_MAX = 30;
		
		<!--DESENHO				
		var canvas = document.getElementById("main");
		var screen = canvas.getContext("2d");
		
		var cima = false;
		var baixo = false;
		var cima_1 = false;
		var baixo_1 = false;
		
		var paused = true;
		var showingEndGame = false;
		
		var imagen_fim = new Image();
		var imagen_fim_carregada = false;
		var imagen_fim_largura_W = 100;
		var imagen_fim_altura_H = 50;
		var imagen_fim_posicao_X = 400;
		var imagen_fim_posicao_Y = 300;

		
		

		load();
		
		function load()
		{	
			<!--TELA CARREGADA	
			tela_imagem.src="tela.png";
			tela_imagem.onload =
			function() { tela_carregada = true; console.log("tela_carregada"); }
					
			<!--PALETA ESQUERDA CARREGADA	
			paleta_esquerda_imagem.src="paleta_esquerda.png";
			paleta_esquerda_imagem.onload =
			function() { paleta_esquerda_carregada = true; console.log("paleta_esquerda_carregada"); }
			
			<!--PELETA DIREITA CARREGADA
			paleta_direita_imagem.src="paleta_direita.png";
			paleta_direita_imagem.onload =
			function() { paleta_direita_carregada = true; console.log("paleta_direita_carregada"); }

			<!--BOLA CARREGADA
			bola_imagem.src="bola.png";
			bola_imagem.onload =
			function() { bola_carregada = true; console.log("bola_carregada"); }
			
			console.log("load");
			
			if(paleta_direita_carregada && paleta_esquerda_carregada && tela_carregada && bola_carregada)
				
			{					
			loop();	
			}
			else
			{
				setTimeout(load, 30)
			}	
		}

function Update()
	{		

			if(paused)
		{
			return;
		}		
			console.log("update");
			
			<!--MOVENDO PALETA ESQUERDA
			if (cima == true)
			{
				paleta_esquerda_posicao_Y -= paleta_esquerda_velocidade_Y;
			}
			
			if (baixo == true)
			{
				paleta_esquerda_posicao_Y += paleta_esquerda_velocidade_Y;
			}
			
			<!--MOVENDO PALETA DIREITA
			if (cima_1 == true)
			{
				paleta_direita_posicao_Y -= paleta_direita_velocidade_Y;
			}
			
			if (baixo_1 == true)
			{
				paleta_direita_posicao_Y += paleta_direita_velocidade_Y;
			}
			
			
						
			<!--TESTE DE COLISAO BAIXO
			if(bola_posicao_Y > (tela_tamanho_H - bola_tamanho_H))
			{
				bola_velocidade_Y *=-1;
				efeito_borda.play();
			}
			
			<!--TESTE COLISAO CIMA
			if(bola_posicao_Y < 0 )
			{
				bola_velocidade_Y *=-1;
				efeito_borda.play();
			}
			
			<!--TESTE COLISAO DIREITA
			if(bola_posicao_X > (tela_tamanho_W - bola_tamanho_W))
			{
				bola_posicao_X = 400;
				bola_posicao_Y = 300;
				bola_velocidade_X =- Math.floor((Math.random()*10)+1);
				bola_velocidade_Y =- Math.floor((Math.random()*10)+1);
				pontos_direita++;
			}
			<!--TESTE COLISAO ESQUERDA
			if(bola_posicao_X < 0 )
			{
				bola_posicao_X = 400;
				bola_posicao_Y = 300;
				bola_velocidade_X = Math.floor((Math.random()*10)+1);
				bola_velocidade_Y += Math.floor((Math.random()*10)+1);
				pontos_esquerda++;
			}
			
			<!--POSICAO BOLA
			bola_posicao_X += bola_velocidade_X
			bola_posicao_Y += bola_velocidade_Y
			
					
			
			<!--COLISAO BOLA PALETA DIREITA
			//bola colidiu paleta direita
			if(Collide(
						bola_posicao_X,
						bola_posicao_Y,
						bola_tamanho_W,
						bola_tamanho_H,
						paleta_direita_posicao_X,
						paleta_direita_posicao_Y,
						paleta_direita_tamanho_W,
						paleta_direita_tamanho_H
						))
			{
				bola_velocidade_X++;
				bola_velocidade_X *= -1;
				efeito_bola.play();
				
				if(bola_velocidade_X > bola_velocidade_MAX )
				{ 			
 					bola_velocidade_X += 5
				}
 			}						
			
			
			<!--COLISAO BOLA PALETA ESQUERDA
			//bola colidiu paleta esquerda
			if(Collide(
						bola_posicao_X,
						bola_posicao_Y,
						bola_tamanho_W,
						bola_tamanho_H,
						paleta_esquerda_posicao_X,
						paleta_esquerda_posicao_Y,
						paleta_esquerda_tamanho_W,
						paleta_esquerda_tamanho_H
						))
 			{
				bola_velocidade_X++;
				bola_velocidade_X *=-1;
				efeito_bola.play();

				
				if(bola_velocidade_X < bola_velocidade_MAX )
				{ 			
 					bola_velocidade_X += 5
				}
 			}
 			
 			
			<!--MANTENDO A PALETA DIREITA NA TELA
			if(paleta_direita_posicao_Y < 0)
			{
				paleta_direita_posicao_Y = 0;
			}				
						
			if(paleta_direita_posicao_Y > tela_tamanho_H - paleta_direita_tamanho_H)			
			{
				paleta_direita_posicao_Y = tela_tamanho_H - paleta_direita_tamanho_H;
			}
			
			<!--MANTENDO A PALETA ESQUERDA NA TELA
			if(paleta_esquerda_posicao_Y < 0)
			{
				paleta_esquerda_posicao_Y = 0;
			}				
						
			if(paleta_esquerda_posicao_Y > tela_tamanho_H - paleta_esquerda_tamanho_H)			
			{
				paleta_esquerda_posicao_Y = tela_tamanho_H - paleta_esquerda_tamanho_H;
			}
			
			if((pontos_direita>1)||(pontos_esquerda>1))
			{
				showingEndGame = true;
				paused = true;				
			}
			
	}
		
		function Draw()
		{
			console.log("draw");
			
			clear();
			
			screen.drawImage(tela_imagem, 0,0);
			screen.drawImage(paleta_esquerda_imagem, paleta_esquerda_posicao_X, paleta_esquerda_posicao_Y);
			screen.drawImage(paleta_direita_imagem, paleta_direita_posicao_X, paleta_direita_posicao_Y);
			screen.drawImage(bola_imagem, bola_posicao_X, bola_posicao_Y);
			
			screen.font= "100px Arial";
			screen.fillStyl= "#000000";
			screen.fillText("" + pontos_direita, 200, 100);
			screen.fillText("" + pontos_esquerda, 600, 100);
			
			if(showingEndGame == true)
			{
				screen.drawImage(imagen_fim,imagen_fim_posicao_X,imagen_fim_posicao_Y);<!--DESENHANDO  A IMAGEM DE FIM--!>
				 
				screen.font="50px Arial";
				screen.fillStyle="#000000";
					
				<!--DESENHANDO O TEXTO DO VENCEDOR--!>
				if (pontos_direita >= pontos_esquerda)
				{ 
					screen.fillText("WIN",150,200);
					screen.fillText("LOUSE",550,200);
				}
				else
				{
					screen.fillText("WIN",550,200);
					screen.fillText("LOUSE",150,200);					 
				}
			}
		}
				
		window.addEventListener('mousemove' , mouse_move , true);
		window.addEventListener('mousedown' , mouse_down , true);
		function mouse_move(mouse)
		{
			if(!paused)
			{			
			console.log(" mouse X " + mouse.x + " mouse Y " + mouse.y);
			}
		}			
		
		function mouse_down(mouse)
		{
			if(showingEndGame)
			{
			Restart();			
			}
			
			paused = !paused;		
		}
		
		function clear()
		{
			screen.clearRect(0,0,900,700);
		}
		
		
		
		function loop()
		{
			console.log("loop");
			
			Update();	
			
			Draw();
			
			setTimeout(loop, 30);			
		}
		
		
		window.addEventListener("keydown",key_down,true);
		window.addEventListener("keyup",key_up,true);

		function key_down(key)		
		{
			if(key.keyCode=="87")
			{
				cima = true;//verdadeiro
			}
			
			if(key.keyCode=="83")
			{
				baixo = true;//verdadeiro
			}
			
			if(key.keyCode=="38")
			{
				cima_1 = true;//verdadeiro
			}
			
			if(key.keyCode=="40")
			{
				baixo_1 = true;//verdadeiro
			}
			
		}
		
		function key_up(key)
		{
			if(key.keyCode=="87")
			{
				cima = false;
			}
			
			if(key.keyCode=="83")
			{
				baixo = false;//verdadeiro
				
			}if(key.keyCode=="38")
			{
				cima_1 = false;
			}
			
			if(key.keyCode=="40")
			{
				baixo_1 = false;//verdadeiro
			}
		}		
	
				
		<!--EFEITO DA DO SOM DA BORDA
		var efeito_borda = new Audio();
		efeito_borda.src = "borda.wav";	
		efeito_borda.load();
		
		
		var efeito_bola = new Audio();
		efeito_bola.src = "powerpong.mp3";
		efeito_bola.load();
		
	
		
		<!--Retornar se um rect colidir com outro
		function Collide(x1, y1, w1, h1, x2, y2, w2, h2)
		{
				if((x1+w1<x2)//se rect1 esquerda rect2
				||(x1>x2+w2)//se rect1 direida rect2
				||(y1+h1<y2)//se rect1 acima rect2
				||(y1>y2+h2))//se rect1 abaixo rect2				
				{
					return false;//nao colidiu
				}				
				else
				{
					return true;//colidiu
				}
		}
		
		function Restart()
	{
		<!--PONTOS ZERAM--!>
		pontos_direita = 0;
	    pontos_esquerda = 0;
	    
	    <!--A BOLA VOLTA A POSIÇÃO E A VELOCIDADE ORIGINAIS--!>
        bola_posicao_X = 400;
	 	bola_posicao_Y = 300;
	 	bola_velocidade_X = Math.floor((Math.random()*10)+1);
		bola_velocidade_Y = Math.floor((Math.random()*10)+1);
	 	
	 	<!--A PALHETA MARRON VOLTA AO VALORES INICIAIS--!>
	 	paleta_esquerda_posicao_X = 1;
		paleta_esquerda_posicao_Y = (altura_tela_H-palheta_marron_tamanho_H)/2;
		
		<!--PALHETA MARROM TAMBEM VOLTA AO VALORES INICIAIS--!>
		paleta_direita_posicao_X = 759 ;
		paleta_direita_posicao_Y = 240
		palheta_azul_velocidade_X = 5;
		palheta_azul_velocidade_Y = 5;
		showingEndGame = false;
		
	}
	
		function Stop()
		{
			paused = true;
		}
	

	
		</script>
	</body>
	
</html>